from django.contrib.gis.geos import fromstr
from django.db import migrations


def add_hospital_locations(apps, schema_editor):
    locations = [
        {'lng': 74.8715462, 'lat': 42.6487154, 'code': '8248'},
        {'lng': 74.0776455, 'lat': 42.8266315, 'code': '8160'},
        {'lng': 74.6964285, 'lat': 42.86985300000001, 'code': '8021'},
        {'lng': 74.5426494, 'lat': 42.8756614, 'code': '8228'},
        {'lng': 72.8000477, 'lat': 40.5548074, 'code': '9004'},
        {'lng': 72.81166259999999, 'lat': 40.53204909999999, 'code': '9005'},
        {'lng': 74.57497599999999, 'lat': 42.8695891, 'code': '1016'},
        {'lng': 74.69401719999999, 'lat': 42.86990979999999, 'code': '1021'},
        {'lng': 74.5631549, 'lat': 42.8786215, 'code': '1023'},
        {'lng': 74.5736903, 'lat': 42.9491863, 'code': '1029'},
        {'lng': 74.5464526, 'lat': 42.8520268, 'code': '1055'},
        {'lng': 74.6527866, 'lat': 42.8751212, 'code': '1216'},
        {'lng': 74.54569529999999, 'lat': 42.8728321, 'code': '1226'},
        {'lng': 74.54569529999999, 'lat': 42.8728321, 'code': '1228'},
        {'lng': 74.54569529999999, 'lat': 42.8728321, 'code': '1229'},
        {'lng': 74.5953885, 'lat': 42.8620752, 'code': '1314'},
        {'lng': 78.3899892, 'lat': 42.4893103, 'code': '2003'},
        {'lng': 74.6151203, 'lat': 42.874263, 'code': '2111'},
        {'lng': 78.3956082, 'lat': 42.4709742, 'code': '2112'},
        {'lng': 78.41211679999999, 'lat': 42.48011289999999, 'code': '2114'},
        {'lng': 74.6122304, 'lat': 42.8416515, 'code': '2117'},
        {'lng': 78.4013138, 'lat': 42.4885153, 'code': '2118'},
        {'lng': 78.41211679999999, 'lat': 42.48011289999999, 'code': '2120'},
        {'lng': 78.4013138, 'lat': 42.4885153, 'code': '2148'},
        {'lng': 24.7458598, 'lat': 59.433043, 'code': '2151'},
        {'lng': 74.6110384, 'lat': 42.8651735, 'code': '2179'},
        {'lng': 27.5435829, 'lat': 53.8433365, 'code': '2187'},
        {'lng': 77.0770955, 'lat': 42.6379723, 'code': '2188'},
        {'lng': 76.16999899999999, 'lat': 42.4718373, 'code': '2225'},
        {'lng': 76.1934149, 'lat': 42.4600116, 'code': '2226'},
        {'lng': 77.0665649, 'lat': 42.6414501, 'code': '2230'},
        {'lng': 78.3587355, 'lat': 42.7269646, 'code': '2258'},
        {'lng': 76.989913, 'lat': 42.1085387, 'code': '2267'},
        {'lng': 77.48708719999999, 'lat': 42.7215111, 'code': '2326'},
        {'lng': 78.3587355, 'lat': 42.7269646, 'code': '2443'},
        {'lng': 76.1934149, 'lat': 42.4600116, 'code': '2445'},
        {'lng': 76.1934149, 'lat': 42.4600116, 'code': '2447'},
        {'lng': 77.0665649, 'lat': 42.6414501, 'code': '2449'},
        {'lng': 74.54379899999999, 'lat': 42.8621178, 'code': '3008'},
        {'lng': 72.9702673, 'lat': 40.9421738, 'code': '3032'},
        {'lng': 73.009906, 'lat': 40.9404656, 'code': '3059'},
        {'lng': 74.5956514, 'lat': 42.8724631, 'code': '3191'},
        {'lng': 74.6002051, 'lat': 42.8365337, 'code': '3295'},
        {'lng': 73.0052406, 'lat': 40.9307174, 'code': '3366'},
        {'lng': 72.9702673, 'lat': 40.9421738, 'code': '3368'},
        {'lng': 73.008794, 'lat': 40.9349007, 'code': '3369'},
        {'lng': 72.6709494, 'lat': 41.631131, 'code': '3396'},
        {'lng': 72.99444679999999, 'lat': 40.9451604, 'code': '3425'},
        {'lng': 74.6002051, 'lat': 42.8365337, 'code': '3587'},
        {'lng': 73.0052406, 'lat': 40.9307174, 'code': '3639'},
        {'lng': 72.9702673, 'lat': 40.9421738, 'code': '3736'},
        {'lng': 74.6147891, 'lat': 42.8614647, 'code': '4125'},
        {'lng': 72.75735499999999, 'lat': 40.5288097, 'code': '4136'},
        {'lng': 74.5671292, 'lat': 42.8646689, 'code': '4152'},
        {'lng': 82.917632, 'lat': 55.021628, 'code': '4184'},
        {'lng': 71.4242107, 'lat': 51.162808, 'code': '4237'},
        {'lng': 74.5960549, 'lat': 42.8836444, 'code': '4280'},
        {'lng': 74.5671292, 'lat': 42.8646689, 'code': '4324'},
        {'lng': 71.49077799999999, 'lat': 51.1591416, 'code': '4331'},
        {'lng': 74.6406626, 'lat': 42.8537694, 'code': '4332'},
        {'lng': 70.8200794, 'lat': 40.0610254, 'code': '5057'},
        {'lng': 70.8200794, 'lat': 40.0610254, 'code': '5061'},
        {'lng': 74.6034239, 'lat': 42.8833759, 'code': '5091'},
        {'lng': 70.8091405, 'lat': 40.0722648, 'code': '5100'},
        {'lng': 72.13528920000002, 'lat': 40.2618876, 'code': '5196'},
        {'lng': 72.13528920000002, 'lat': 40.2618876, 'code': '5197'},
        {'lng': 72.13528920000002, 'lat': 40.2618876, 'code': '5198'},
        {'lng': 72.13528920000002, 'lat': 40.2618876, 'code': '5199'},
        {'lng': 72.13528920000002, 'lat': 40.2618876, 'code': '5477'},
        {'lng': 72.13528920000002, 'lat': 40.2618876, 'code': '5478'},
        {'lng': 72.13528920000002, 'lat': 40.2618876, 'code': '5489'},
        {'lng': 72.13528920000002, 'lat': 40.2618876, 'code': '5499'},
        {'lng': 72.8757505, 'lat': 40.708972, 'code': '6824'},
        {'lng': 74.47951259999999, 'lat': 42.8613086, 'code': '7013'},
        {'lng': 74.6221119, 'lat': 42.877902, 'code': '7198'},
        {'lng': 71.5774942, 'lat': 42.6171098, 'code': '7218'},
        {'lng': 74.6364935, 'lat': 42.9110484, 'code': '7265'},
        {'lng': 74.6568109, 'lat': 42.8848853, 'code': '8000'},
        {'lng': 74.096197, 'lat': 42.8299465, 'code': '8005'},
        {'lng': 73.84434680000001, 'lat': 42.81635869999999, 'code': '8006'},
        {'lng': 37.1557903, 'lat': 55.5368422, 'code': '8027'},
        {'lng': 74.3405664, 'lat': 42.8610318, 'code': '8068'},
        {'lng': 74.4466568, 'lat': 42.8723053, 'code': '8072'},
        {'lng': 30.4153748, 'lat': 59.87014430000001, 'code': '8077'},
        {'lng': 74.6568109, 'lat': 42.8848853, 'code': '8088'},
        {'lng': 74.66121179999999, 'lat': 42.8903122, 'code': '8107'},
        {'lng': 75.31013140000002, 'lat': 42.8442566, 'code': '8109'},
        {'lng': 75.3100785, 'lat': 42.8440574, 'code': '8110'},
        {'lng': 75.3100785, 'lat': 42.8440574, 'code': '8111'},
        {'lng': 74.604247, 'lat': 42.8431127, 'code': '8127'},
        {'lng': 75.59236469999999, 'lat': 42.74258650000001, 'code': '8136'},
        {'lng': 75.31013140000002, 'lat': 42.8442566, 'code': '8277'},
        {'lng': 73.84434680000001, 'lat': 42.81635869999999, 'code': '8286'},
        {'lng': 73.8560352, 'lat': 42.7980629, 'code': '8291'},
        {'lng': 75.31013140000002, 'lat': 42.8442566, 'code': '8354'},
        {'lng': 75.59236469999999, 'lat': 42.74258650000001, 'code': '8401'},
        {'lng': 74.50221189999999, 'lat': 42.7320482, 'code': '8432'},
        {'lng': 73.6783074, 'lat': 42.79518230000001, 'code': '8440'},
        {'lng': 74.9157532, 'lat': 42.7925035, 'code': '8505'},
        {'lng': 74.0951101, 'lat': 42.827634, 'code': '8550'},
        {'lng': 37.6158661, 'lat': 55.76575949999999, 'code': '8553'},
        {'lng': 72.79845700000001, 'lat': 40.5228466, 'code': '9000'},
        {'lng': 72.8054011, 'lat': 40.53107869999999, 'code': '9002'},
        {'lng': 72.8065116, 'lat': 40.5133567, 'code': '9015'},
        {'lng': 72.7911392, 'lat': 40.5431429, 'code': '9016'},
        {'lng': 72.80053699999999, 'lat': 40.5588657, 'code': '9021'},
        {'lng': 72.7807012, 'lat': 40.5514923, 'code': '9027'},
        {'lng': 74.59258439999999, 'lat': 42.8674749, 'code': '9029'},
        {'lng': 72.7935499, 'lat': 40.5339923, 'code': '9030'},
        {'lng': 72.8277233, 'lat': 40.4928849, 'code': '9033'},
        {'lng': 72.8045009, 'lat': 40.54027689999999, 'code': '9034'},
        {'lng': 72.8016074, 'lat': 40.5441168, 'code': '9041'},
        {'lng': 72.7800584, 'lat': 40.5225563, 'code': '9067'},
        {'lng': 72.802145, 'lat': 40.5670454, 'code': '9104'},
        {'lng': 72.7986256, 'lat': 40.5370847, 'code': '9479'},
        {'lng': 72.802145, 'lat': 40.5670454, 'code': '9489'},
        {'lng': 72.80184, 'lat': 40.5265222, 'code': '9503'},
        {'lng': 72.7949265, 'lat': 40.5133378, 'code': '9506'},
        {'lng': 72.80570449999999, 'lat': 40.5131419, 'code': '9513'},
        {'lng': 72.7904203, 'lat': 40.5159857, 'code': '9517'},
        {'lng': 72.80184, 'lat': 40.5265222, 'code': '9829'},
    ]

    Hospital = apps.get_model('distributor', 'Hospital')

    for location in locations:
        hospital = Hospital.objects.filter(code=location['code']).first()
        if hospital:
            hospital.location = fromstr(f'POINT({location["lng"]} {location["lat"]})', srid=4326)
            hospital.save()


class Migration(migrations.Migration):
    dependencies = [
        ('distributor', '0037_add_statistics'),
    ]

    operations = [
        migrations.RunPython(add_hospital_locations),
    ]
